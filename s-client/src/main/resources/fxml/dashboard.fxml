<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>

<VBox xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="com.semulator.client.ui.DashboardController"
      style="-fx-background-color: #f5f5f5; -fx-padding: 10;">
   
   <children>
      <!-- Main Title -->
      <Label text="S-Emulator - Dashboard" 
             style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #333; -fx-padding: 10; -fx-alignment: center;"
             maxWidth="Infinity"> 
         <VBox.margin><Insets bottom="20.0"/></VBox.margin>
      </Label>
      
      <!-- Header Bar -->
      <HBox fx:id="headerBar" 
            style="-fx-background-color: #e0e0e0; -fx-padding: 10; -fx-spacing: 15;"
            alignment="CENTER_LEFT">
         <children>
            <!-- User Name -->
            <Label text="User Name:" style="-fx-font-weight: bold;"/>
            <Label fx:id="currentUserName" text="[Current User]" style="-fx-text-fill: #0066cc;"/>
            
            <!-- Load File Button -->
            <Button fx:id="loadFileButton" text="Load File" 
                    style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-weight: bold;"/>
            
            <!-- Currently Loaded File Path -->
            <Label text="File path: " style="-fx-font-weight: bold;"/>
            <TextField fx:id="loadedFilePath" editable="false" 
                       style="-fx-background-color: #fff; -fx-min-width: 300px;"/>
            
            <!-- Available Credits -->
            <Label text="Available Credits:" style="-fx-font-weight: bold;"/>
            <Label fx:id="availableCredits" text="0" style="-fx-text-fill: #ff6600; -fx-font-weight: bold;"/>
            
            <!-- Charge Credits Button -->
            <Button fx:id="chargeCreditsButton" text="Charge" 
                    style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-weight: bold;"/>
            
            <!-- Credits Input Field -->
            <Label text="Amount:"/>
            <TextField fx:id="creditsInput" promptText="credits" 
                       style="-fx-background-color: #fff; -fx-max-width: 80px;"/>
            
            <!-- Spacer to push Chat button to the right -->
            <Region HBox.hgrow="ALWAYS"/>
            
            <!-- Chat Button -->
            <Button fx:id="chatButton" text="ðŸ’¬ Chat" 
                    style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15;"/>
         </children>
         <VBox.margin><Insets bottom="20.0"/></VBox.margin>
      </HBox>
      
      <!-- Main Components Grid (2x2) -->
      <GridPane hgap="10" vgap="10" VBox.vgrow="ALWAYS">
         <columnConstraints>
            <ColumnConstraints hgrow="SOMETIMES" minWidth="300"/>
            <ColumnConstraints hgrow="SOMETIMES" minWidth="300"/>
         </columnConstraints>
         <rowConstraints>
            <RowConstraints vgrow="SOMETIMES" minHeight="200"/>
            <RowConstraints vgrow="SOMETIMES" minHeight="200"/>
         </rowConstraints>
         
         <!-- Top-Left: Available Users -->
         <VBox GridPane.columnIndex="0" GridPane.rowIndex="0" 
               style="-fx-background-color: #fff; -fx-border-color: #ccc; -fx-border-width: 1; -fx-padding: 15;">
            <children>
               <Label text="Available Users" 
                      style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #333;">
                  <VBox.margin><Insets bottom="10.0"/></VBox.margin>
               </Label>
               <TableView fx:id="usersTable" VBox.vgrow="ALWAYS">
                  <columns>
                     <TableColumn fx:id="userNameColumn" text="User Name" prefWidth="120"/>
                     <TableColumn fx:id="mainProgramsColumn" text="Programs" prefWidth="100"/>
                     <TableColumn fx:id="subfunctionsColumn" text="Functions" prefWidth="100"/>
                     <TableColumn fx:id="userCreditsColumn" text="Credits" prefWidth="80"/>
                     <TableColumn fx:id="creditsUsedColumn" text="Used" prefWidth="70"/>
                     <TableColumn fx:id="runsColumn" text="Runs" prefWidth="60"/>
                  </columns>
               </TableView>
               <HBox alignment="CENTER" spacing="10">
                  <children>
                     <Button fx:id="unselectUserButton" text="Unselect User" 
                             style="-fx-background-color: #ff9800; -fx-text-fill: white; -fx-font-weight: bold;"/>
                  </children>
                  <VBox.margin><Insets top="10.0"/></VBox.margin>
               </HBox>
            </children>
         </VBox>
         
         <!-- Top-Right: Available Programs -->
         <VBox GridPane.columnIndex="1" GridPane.rowIndex="0" 
               style="-fx-background-color: #fff; -fx-border-color: #ccc; -fx-border-width: 1; -fx-padding: 15;">
            <children>
               <Label text="Available Programs" 
                      style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #333;">
                  <VBox.margin><Insets bottom="10.0"/></VBox.margin>
               </Label>
               <TableView fx:id="programsTable" VBox.vgrow="ALWAYS">
                  <columns>
                     <TableColumn fx:id="programNameColumn" text="Program Name" prefWidth="120"/>
                     <TableColumn fx:id="uploadedByColumn" text="Uploaded By" prefWidth="100"/>
                     <TableColumn fx:id="instructionCountColumn" text="Instructions" prefWidth="90"/>
                     <TableColumn fx:id="maxLevelColumn" text="Max Level" prefWidth="80"/>
                     <TableColumn fx:id="programRunsColumn" text="Runs" prefWidth="60"/>
                     <TableColumn fx:id="avgCostColumn" text="Avg Cost" prefWidth="80"/>
                  </columns>
               </TableView>
               <HBox alignment="CENTER_RIGHT" spacing="10">
                  <children>
                     <Button fx:id="executeProgramButton" text="Execute Program" 
                             style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-weight: bold;"/>
                  </children>
                  <VBox.margin><Insets top="10.0"/></VBox.margin>
               </HBox>
            </children>
         </VBox>
         
         <!-- Bottom-Left: Users History / Statistics Table -->
         <VBox GridPane.columnIndex="0" GridPane.rowIndex="1" 
               style="-fx-background-color: #fff; -fx-border-color: #ccc; -fx-border-width: 1; -fx-padding: 15;">
            <children>
               <Label fx:id="historyTableTitle" text="Users History / Statistics Table" 
                      style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #333;">
                  <VBox.margin><Insets bottom="10.0"/></VBox.margin>
               </Label>
               <TableView fx:id="historyTable" VBox.vgrow="ALWAYS">
                  <columns>
                     <TableColumn fx:id="runNumberColumn" text="Run #" prefWidth="50"/>
                     <TableColumn fx:id="typeColumn" text="Type" prefWidth="80"/>
                     <TableColumn fx:id="nameColumn" text="Program/Function" prefWidth="130"/>
                     <TableColumn fx:id="architectureColumn" text="Architecture" prefWidth="90"/>
                     <TableColumn fx:id="levelColumn" text="Level" prefWidth="50"/>
                     <TableColumn fx:id="yValueColumn" text="y Value" prefWidth="70"/>
                     <TableColumn fx:id="cyclesColumn" text="Cycles" prefWidth="60"/>
                  </columns>
               </TableView>
               <HBox alignment="CENTER" spacing="10">
                  <children>
                     <Button fx:id="showStatusButton" text="Show Status" 
                             style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-weight: bold;"/>
                     <Button fx:id="reRunButton" text="Re-Run" 
                             style="-fx-background-color: #ff9800; -fx-text-fill: white; -fx-font-weight: bold;"/>
                  </children>
                  <VBox.margin><Insets top="10.0"/></VBox.margin>
               </HBox>
            </children>
         </VBox>
         
         <!-- Bottom-Right: Available Functions -->
         <VBox GridPane.columnIndex="1" GridPane.rowIndex="1" 
               style="-fx-background-color: #fff; -fx-border-color: #ccc; -fx-border-width: 1; -fx-padding: 15;">
            <children>
               <Label text="Available Functions" 
                      style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #333;">
                  <VBox.margin><Insets bottom="10.0"/></VBox.margin>
               </Label>
               <TableView fx:id="functionsTable" VBox.vgrow="ALWAYS">
                  <columns>
                     <TableColumn fx:id="functionNameColumn" text="Function Name" prefWidth="120"/>
                     <TableColumn fx:id="parentProgramColumn" text="Parent Program" prefWidth="110"/>
                     <TableColumn fx:id="functionUploadedByColumn" text="Uploaded By" prefWidth="90"/>
                     <TableColumn fx:id="functionInstructionCountColumn" text="Instructions" prefWidth="90"/>
                     <TableColumn fx:id="functionMaxLevelColumn" text="Max Level" prefWidth="80"/>
                  </columns>
               </TableView>
               <HBox alignment="CENTER_RIGHT" spacing="10">
                  <children>
                     <Button fx:id="executeFunctionButton" text="Execute Function" 
                             style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-weight: bold;"/>
                  </children>
                  <VBox.margin><Insets top="10.0"/></VBox.margin>
               </HBox>
            </children>
         </VBox>
         
      </GridPane>
      
   </children>
</VBox>